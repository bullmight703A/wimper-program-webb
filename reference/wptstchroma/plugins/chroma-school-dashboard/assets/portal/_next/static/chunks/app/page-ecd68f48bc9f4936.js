(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{220:function(e,n,o){"use strict";o.d(n,{kZ:function(){return u},rg:function(){return l}});var t=o(2265);let r=(0,t.createContext)(null);function l({clientId:e,nonce:n,onScriptLoadSuccess:o,onScriptLoadError:l,children:i}){let u=function(e={}){let{nonce:n,onScriptLoadSuccess:o,onScriptLoadError:r}=e,[l,i]=(0,t.useState)(!1),u=(0,t.useRef)(o);u.current=o;let c=(0,t.useRef)(r);return c.current=r,(0,t.useEffect)(()=>{let e=document.createElement("script");return e.src="https://accounts.google.com/gsi/client",e.async=!0,e.defer=!0,e.nonce=n,e.onload=()=>{var e;i(!0),null===(e=u.current)||void 0===e||e.call(u)},e.onerror=()=>{var e;i(!1),null===(e=c.current)||void 0===e||e.call(c)},document.body.appendChild(e),()=>{document.body.removeChild(e)}},[n]),l}({nonce:n,onScriptLoadSuccess:o,onScriptLoadError:l}),c=(0,t.useMemo)(()=>({clientId:e,scriptLoadedSuccessfully:u}),[e,u]);return t.createElement(r.Provider,{value:c},i)}let i={large:40,medium:32,small:20};function u({onSuccess:e,onError:n,useOneTap:o,promptMomentNotification:l,type:u="standard",theme:c="outline",size:s="large",text:d,shape:a,logo_alignment:f,width:v,locale:m,click_listener:h,containerProps:p,...g}){let w=(0,t.useRef)(null),{clientId:x,scriptLoadedSuccessfully:b}=function(){let e=(0,t.useContext)(r);if(!e)throw Error("Google OAuth components must be used within GoogleOAuthProvider");return e}(),_=(0,t.useRef)(e);_.current=e;let y=(0,t.useRef)(n);y.current=n;let j=(0,t.useRef)(l);return j.current=l,(0,t.useEffect)(()=>{var e,n,t,r,l,i,p,N,E;if(b)return null===(t=null===(n=null===(e=null==window?void 0:window.google)||void 0===e?void 0:e.accounts)||void 0===n?void 0:n.id)||void 0===t||t.initialize({client_id:x,callback:e=>{var n;if(!(null==e?void 0:e.credential))return null===(n=y.current)||void 0===n?void 0:n.call(y);let{credential:o,select_by:t}=e;_.current({credential:o,clientId:function(e){var n;let o=null!==(n=null==e?void 0:e.clientId)&&void 0!==n?n:null==e?void 0:e.client_id;return o}(e),select_by:t})},...g}),null===(i=null===(l=null===(r=null==window?void 0:window.google)||void 0===r?void 0:r.accounts)||void 0===l?void 0:l.id)||void 0===i||i.renderButton(w.current,{type:u,theme:c,size:s,text:d,shape:a,logo_alignment:f,width:v,locale:m,click_listener:h}),o&&(null===(E=null===(N=null===(p=null==window?void 0:window.google)||void 0===p?void 0:p.accounts)||void 0===N?void 0:N.id)||void 0===E||E.prompt(j.current)),()=>{var e,n,t;o&&(null===(t=null===(n=null===(e=null==window?void 0:window.google)||void 0===e?void 0:e.accounts)||void 0===n?void 0:n.id)||void 0===t||t.cancel())}},[x,b,o,u,c,s,d,a,f,v,m]),t.createElement("div",{...p,ref:w,style:{height:i[s],...null==p?void 0:p.style}})}},6931:function(e,n,o){Promise.resolve().then(o.bind(o,3356))},3356:function(e,n,o){"use strict";o.r(n),o.d(n,{default:function(){return u}});var t=o(7437),r=o(220),l=o(4033),i=o(2265);function u(){let e=(0,l.useRouter)(),[n,o]=(0,i.useState)(""),u=async n=>{try{let o=await fetch("".concat("http://localhost/wp-json","/chroma/v1/auth/google"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id_token:n.credential})}),t=await o.json();if(!o.ok)throw Error(t.message||"Login failed");localStorage.setItem("chroma_token",t.token),localStorage.setItem("chroma_school_id",t.school_id),e.push("/dashboard")}catch(e){o(e.message)}};return(0,t.jsx)("main",{className:"min-h-screen flex flex-col items-center justify-center p-6 bg-brand-cream",children:(0,t.jsxs)("div",{className:"w-full max-w-md bg-white rounded-3xl p-8 shadow-xl border border-chroma-blue/10 text-center",children:[(0,t.jsxs)("div",{className:"flex justify-center -space-x-2 mb-6",children:[(0,t.jsx)("span",{className:"w-4 h-4 rounded-full bg-chroma-red"}),(0,t.jsx)("span",{className:"w-4 h-4 rounded-full bg-chroma-yellow"}),(0,t.jsx)("span",{className:"w-4 h-4 rounded-full bg-chroma-green"}),(0,t.jsx)("span",{className:"w-4 h-4 rounded-full bg-chroma-blue"})]}),(0,t.jsx)("h1",{className:"font-serif text-3xl font-bold mb-2",children:"Director Portal"}),(0,t.jsx)("p",{className:"text-brand-ink/60 mb-8",children:"Sign in to manage your school's TV dashboard."}),(0,t.jsx)("div",{className:"flex justify-center",children:(0,t.jsx)(r.kZ,{onSuccess:u,onError:()=>o("Google Login Failed"),useOneTap:!0})}),n&&(0,t.jsx)("p",{className:"mt-4 text-red-500 text-sm font-bold",children:n})]})})}},622:function(e,n,o){"use strict";var t=o(2265),r=Symbol.for("react.element"),l=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function c(e,n,o){var t,c={},s=null,d=null;for(t in void 0!==o&&(s=""+o),void 0!==n.key&&(s=""+n.key),void 0!==n.ref&&(d=n.ref),n)l.call(n,t)&&!u.hasOwnProperty(t)&&(c[t]=n[t]);if(e&&e.defaultProps)for(t in n=e.defaultProps)void 0===c[t]&&(c[t]=n[t]);return{$$typeof:r,type:e,key:s,ref:d,props:c,_owner:i.current}}n.jsx=c,n.jsxs=c},7437:function(e,n,o){"use strict";e.exports=o(622)},4033:function(e,n,o){e.exports=o(94)}},function(e){e.O(0,[971,472,744],function(){return e(e.s=6931)}),_N_E=e.O()}]);