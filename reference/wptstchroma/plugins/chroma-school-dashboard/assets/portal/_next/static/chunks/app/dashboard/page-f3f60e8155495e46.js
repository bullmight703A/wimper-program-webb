(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{9919:function(e,s,r){Promise.resolve().then(r.bind(r,227))},227:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return b}});var t=r(7437),l=r(2265),a=r(4033),o=r(1865),n=r(3711),d=r(5883),c=r(2295),i=r(9883),x=r(5367);function b(){let e=(0,a.useRouter)(),[s,r]=(0,l.useState)(!0),[b,m]=(0,l.useState)(!1),[h,u]=(0,l.useState)(null),{register:p,control:f,handleSubmit:g,reset:j}=(0,o.cI)(),{fields:y,append:N,remove:v}=(0,o.Dq)({control:f,name:"announcements"}),{fields:w,append:k,remove:S}=(0,o.Dq)({control:f,name:"today"});(0,l.useEffect)(()=>{let s=localStorage.getItem("chroma_token");if(!s){e.push("/");return}fetch("".concat("https://chromaela.com/wp-json","/chroma/v1/portal/me"),{headers:{Authorization:"Bearer ".concat(s)}}).then(e=>{if(401===e.status)throw Error("Unauthorized");return e.json()}).then(e=>{u(e),j(e.content),r(!1)}).catch(()=>{localStorage.removeItem("chroma_token"),e.push("/")})},[e,j]);let z=async e=>{m(!0);let s=localStorage.getItem("chroma_token");try{let r=await fetch("".concat("https://chromaela.com/wp-json","/chroma/v1/portal/school/").concat(null==h?void 0:h.id),{method:"PATCH",headers:{Authorization:"Bearer ".concat(s),"Content-Type":"application/json"},body:JSON.stringify(e)});if(!r.ok)throw Error("Save failed");alert("Saved successfully!")}catch(e){alert("Error saving data")}finally{m(!1)}};return s?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:"Loading..."}):(0,t.jsxs)("div",{className:"min-h-screen pb-20",children:[(0,t.jsx)("header",{className:"bg-white border-b border-brand-ink/5 sticky top-0 z-50",children:(0,t.jsxs)("div",{className:"max-w-5xl mx-auto px-6 py-4 flex items-center justify-between",children:[(0,t.jsxs)("h1",{className:"font-serif text-xl font-bold",children:["Chroma Portal ",(0,t.jsx)("span",{className:"text-brand-ink/40",children:"|"})," ",null==h?void 0:h.title]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("a",{href:"/tv/".concat(null==h?void 0:h.slug),target:"_blank",className:"text-sm font-bold text-chroma-blue flex items-center gap-2 hover:underline",children:[(0,t.jsx)(n.Z,{size:16})," Preview TV"]}),(0,t.jsx)("button",{onClick:()=>{localStorage.clear(),e.push("/")},className:"text-red-500 hover:bg-red-50 p-2 rounded-full",children:(0,t.jsx)(d.Z,{size:20})})]})]})}),(0,t.jsx)("main",{className:"max-w-5xl mx-auto px-6 py-8",children:(0,t.jsxs)("form",{onSubmit:g(z),className:"space-y-8",children:[(0,t.jsx)("div",{className:"flex justify-end",children:(0,t.jsxs)("button",{disabled:b,type:"submit",className:"bg-chroma-blue text-white px-8 py-3 rounded-full font-bold shadow-lg hover:bg-chroma-blueDark transition-colors flex items-center gap-2",children:[(0,t.jsx)(c.Z,{size:20})," ",b?"Saving...":"Save Changes"]})}),(0,t.jsxs)("section",{className:"bg-white p-6 rounded-3xl shadow-sm border border-brand-ink/5",children:[(0,t.jsx)("h2",{className:"font-serif text-2xl font-bold mb-6 text-chroma-red",children:"Newsletter"}),(0,t.jsxs)("div",{className:"grid gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-bold uppercase mb-1",children:"Title"}),(0,t.jsx)("input",{...p("newsletter.title"),className:"w-full p-3 rounded-xl border border-gray-200 bg-gray-50 font-bold"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-bold uppercase mb-1",children:"Body Text (Short)"}),(0,t.jsx)("textarea",{...p("newsletter.body"),rows:3,className:"w-full p-3 rounded-xl border border-gray-200 bg-gray-50"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-bold uppercase mb-1",children:"Drive Link (Share URL)"}),(0,t.jsx)("input",{...p("newsletter.url"),placeholder:"https://drive.google.com/...",className:"w-full p-3 rounded-xl border border-gray-200 bg-gray-50"})]})]})]}),(0,t.jsxs)("section",{className:"bg-white p-6 rounded-3xl shadow-sm border border-brand-ink/5",children:[(0,t.jsx)("h2",{className:"font-serif text-2xl font-bold mb-6 text-chroma-blue",children:"Employee of the Month"}),(0,t.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-bold uppercase mb-1",children:"Name"}),(0,t.jsx)("input",{...p("eom.name"),className:"w-full p-3 rounded-xl border border-gray-200 bg-gray-50 font-bold"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-bold uppercase mb-1",children:"Photo URL"}),(0,t.jsx)("input",{...p("eom.photo_url"),placeholder:"https://...",className:"w-full p-3 rounded-xl border border-gray-200 bg-gray-50"})]}),(0,t.jsxs)("div",{className:"md:col-span-2",children:[(0,t.jsx)("label",{className:"block text-xs font-bold uppercase mb-1",children:"Blurb"}),(0,t.jsx)("textarea",{...p("eom.blurb"),rows:2,className:"w-full p-3 rounded-xl border border-gray-200 bg-gray-50"})]})]})]}),(0,t.jsxs)("section",{className:"bg-white p-6 rounded-3xl shadow-sm border border-brand-ink/5",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,t.jsx)("h2",{className:"font-serif text-2xl font-bold text-chroma-yellow",children:"Notices"}),(0,t.jsxs)("button",{type:"button",onClick:()=>N({title:"",body:"",priority:"normal"}),className:"text-xs bg-gray-100 hover:bg-gray-200 px-3 py-1 rounded-full font-bold flex items-center gap-1",children:[(0,t.jsx)(i.Z,{size:14})," Add"]})]}),(0,t.jsx)("div",{className:"space-y-4",children:y.map((e,s)=>(0,t.jsxs)("div",{className:"p-4 bg-gray-50 rounded-2xl flex gap-4 items-start relative group",children:[(0,t.jsxs)("div",{className:"flex-1 grid gap-2",children:[(0,t.jsx)("input",{...p("announcements.".concat(s,".title")),placeholder:"Title",className:"font-bold bg-transparent border-b border-gray-200 focus:outline-none"}),(0,t.jsx)("textarea",{...p("announcements.".concat(s,".body")),placeholder:"Details...",rows:2,className:"text-sm bg-transparent border-b border-gray-200 focus:outline-none resize-none"}),(0,t.jsxs)("select",{...p("announcements.".concat(s,".priority")),className:"text-xs bg-white rounded-md p-1 border border-gray-200 w-32",children:[(0,t.jsx)("option",{value:"normal",children:"Normal"}),(0,t.jsx)("option",{value:"high",children:"High Priority"})]})]}),(0,t.jsx)("button",{type:"button",onClick:()=>v(s),className:"text-red-400 hover:text-red-600",children:(0,t.jsx)(x.Z,{size:18})})]},e.id))})]}),(0,t.jsxs)("section",{className:"bg-white p-6 rounded-3xl shadow-sm border border-brand-ink/5",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,t.jsx)("h2",{className:"font-serif text-2xl font-bold",children:"Today Items"}),(0,t.jsxs)("button",{type:"button",onClick:()=>k({time:"",label:""}),className:"text-xs bg-gray-100 hover:bg-gray-200 px-3 py-1 rounded-full font-bold flex items-center gap-1",children:[(0,t.jsx)(i.Z,{size:14})," Add"]})]}),(0,t.jsx)("div",{className:"space-y-2",children:w.map((e,s)=>(0,t.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,t.jsx)("input",{...p("today.".concat(s,".time")),placeholder:"9:00 AM",className:"w-24 p-2 rounded-lg border border-gray-200 bg-gray-50 text-sm font-bold"}),(0,t.jsx)("input",{...p("today.".concat(s,".label")),placeholder:"Event Name",className:"flex-1 p-2 rounded-lg border border-gray-200 bg-gray-50 text-sm"}),(0,t.jsx)("button",{type:"button",onClick:()=>S(s),className:"text-red-400 hover:text-red-600",children:(0,t.jsx)(x.Z,{size:16})})]},e.id))})]}),(0,t.jsxs)("section",{className:"bg-white p-6 rounded-3xl shadow-sm border border-brand-ink/5",children:[(0,t.jsx)("h2",{className:"font-serif text-2xl font-bold mb-6",children:"Media & Links"}),(0,t.jsx)("div",{className:"grid gap-4",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-bold uppercase mb-1",children:"YouTube URL (Overrides Slideshow)"}),(0,t.jsx)("input",{...p("youtube"),placeholder:"https://youtube.com/...",className:"w-full p-3 rounded-xl border border-gray-200 bg-gray-50"})]})})]})]})})]})}}},function(e){e.O(0,[564,971,472,744],function(){return e(e.s=9919)}),_N_E=e.O()}]);